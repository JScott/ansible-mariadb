---
dependencies:
  - role: meta/repository
    repository_key: '0xcbcb082a1bb943db'
    repository_url: 'deb http://sfo1.mirrors.digitalocean.com/mariadb/repo/10.1/ubuntu trusty main'
  - role: meta/monitor
    monitor_name: mariadb
    monitor_pidfile: "{{ mariadb_pidfile_path }}"
    monitor_start_command: /usr/sbin/service mysql start
    monitor_stop_command: /usr/sbin/service mysql stop

# New logging method awaiting mariadb regex formatting
#   - role: packages/fluentd
#     fluentd_sources:
#       - path: "{{ mariadb_general_log_path }}"
#         format: ''
#         tag: mariadb.general
#       - path: "{{ mariadb_slow_query_log_path }}"
#         format: ''
#         tag: mariadb.slow

  - role: package/logrotate
    logrotate_name: mariadb
